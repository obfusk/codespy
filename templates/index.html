<!doctype html>
<html lang="en">
  <!--

    File        : templates/index.html
    Maintainer  : Felix C. Stegerman <flx@obfusk.net>
    Date        : 2020-03-26

    Copyright   : Copyright (C) 2020  Felix C. Stegerman
    Version     : v0.0.1
    License     : AGPLv3+

  -->
  <head>
    {% include "_meta.html" %}
    {% if game %}
      <title>codespy | {{ game }}</title>
    {% else %}
      <title>codespy</title>
    {% endif %}
    <style>
      button              { font-size: large; }
      input[type=number]  { width: 3em; }
    </style>
  </head>
  <body>
    <form method="post" action="/play">
      {% if join %}
        Game:
        <a href="/?join=yes&game={{ game }}">{{ game }}</a>
        <input type="hidden" name="game" value="{{ game }}" />
      {% else %}
        <label>
          Game:
          <input name="game" value="{{ game }}" required
            pattern="[^ ]+" />
        </label>
      {% endif %}
      <br/>
      <label>
        Name:
        <input name="name" value="{{ name or "" }}" required
          pattern="[^ ]+" />
      </label>
      <br/>
      Side:
      <label>
        <input type="radio" name="side" value="a" checked /> A
      </label>
      <label>
        <input type="radio" name="side" value="b" /> B
      </label>
      {% if not join %}
        <br/>
        Language:
        {% for lang in langs %}
          <label>
            <input type="radio" name="lang" value="{{ lang }}"
              required {% if loop.first %}checked{% endif %} />
            {{ lang }}
          </label>
        {% endfor %}
        <br/>
        <br/>
        <button>Play!</button>
      {% else %}
        <br/>
        <br/>
        <button>Join!</button>
      {% endif %}
      <br/>
      <br/>
      <small>NB: Spaces are not allowed in Game or Name.</small>
    </form>
    {% include "_footer.html" %}
  </body>
</html>
